<p><code>org.springframework.jdbc.object</code> 패키지에는 보다 객체 지향적인 방식으로 데이터베이스에 액세스할 수 있는 클래스가 포함되어 있습니다. 예를 들어, 쿼리를 실행하고 결과를 비즈니스 객체의 속성에 매핑된 관계형 열 데이터와 함께 비즈니스 객체가 포함된 목록으로 다시 가져올 수 있습니다. 저장된 프로시저를 실행하고 업데이트, 삭제 및 삽입 문을 실행할 수도 있습니다.</p>
<blockquote>
<p><strong>[Note]</strong><br>
많은 Spring 개발자들은 아래에 설명된 다양한 RDBMS 작업 클래스(<a href="https://docs.spring.io/spring-framework/reference/data-access/jdbc/object.html#jdbc-StoredProcedure"><code>StoredProcedure</code></a> 클래스 제외)가 종종 직접적인 <code>JdbcTemplate</code> 호출로 대체될 수 있다고 믿습니다. <code>JdbcTemplate</code>에서 직접 메서드를 호출하는 DAO 메서드를 작성하는 것이 더 간단한 경우가 많습니다(쿼리를 완전한 클래스로 캡슐화하는 것과 반대).</p>
<p>그러나 RDBMS 작업 클래스를 사용하여 측정 가능한 가치를 얻고 있다면 이러한 클래스를 계속 사용해야 합니다.</p>
</blockquote>
<h1 id="understanding-sqlquery">Understanding <code>SqlQuery</code></h1>
<p><code>SqlQuery</code>는 SQL 쿼리를 캡슐화하는 재사용 가능하고 스레드로부터 안전한 클래스입니다. 하위 클래스는 쿼리 실행 중에 생성된 <code>ResultSet</code>을 반복하여 얻은 행당 하나의 객체를 생성할 수 있는 <code>RowMapper</code> 인스턴스를 제공하기 위해 <code>newRowMapper(..)</code> 메서드를 구현해야 합니다. <code>MappingSqlQuery</code> 하위 클래스는 행을 Java 클래스에 매핑하는 데 훨씬 더 편리한 구현을 제공하기 때문에 <code>SqlQuery</code> 클래스는 직접적으로 사용되는 경우가 거의 없습니다. <code>SqlQuery</code>를 확장하는(extend) 다른 구현으로는 <code>MappingSqlQueryWithParameters</code> 및 <code>UpdatableSqlQuery</code>가 있습니다.</p>
<h1 id="using-mappingsqlquery">Using <code>MappingSqlQuery</code></h1>
<p><code>MappingSqlQuery</code>는 제공된 <code>ResultSet</code>의 각 행을 지정된 type의 객체로 변환하기 위해 구체적인 하위 클래스가 추상 <code>mapRow(..)</code> 메서드를 구현해야 하는 재사용 가능한 쿼리입니다. 다음 예에서는 <code>t_actor</code> relation의 데이터를 <code>Actor</code> 클래스의 인스턴스에 매핑하는 사용자 지정 쿼리를 보여줍니다.</p>
<pre><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ActorMappingQuery</span> <span class="token keyword">extends</span> <span class="token class-name">MappingSqlQuery</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Actor</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

	<span class="token keyword">public</span> <span class="token class-name">ActorMappingQuery</span><span class="token punctuation">(</span><span class="token class-name">DataSource</span> ds<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">super</span><span class="token punctuation">(</span>ds<span class="token punctuation">,</span> <span class="token string">"select id, first_name, last_name from t_actor where id = ?"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">declareParameter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SqlParameter</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span> <span class="token class-name">Types</span><span class="token punctuation">.</span>INTEGER<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">compile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">protected</span> <span class="token class-name">Actor</span> <span class="token function">mapRow</span><span class="token punctuation">(</span><span class="token class-name">ResultSet</span> rs<span class="token punctuation">,</span> <span class="token keyword">int</span> rowNumber<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
		<span class="token class-name">Actor</span> actor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Actor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		actor<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getLong</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		actor<span class="token punctuation">.</span><span class="token function">setFirstName</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"first_name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		actor<span class="token punctuation">.</span><span class="token function">setLastName</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"last_name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> actor<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>클래스는 <code>Actor</code> 타입으로 매개변수화된 <code>MappingSqlQuery</code>를 확장합니다. 이 고객 쿼리의 생성자는 <code>DataSource</code>를 유일한 매개변수로 사용합니다. 이 생성자에서는 이 쿼리에 대한 행을 검색하기 위해 실행해야 하는 <code>DataSource</code> 및 SQL을 사용하여 슈퍼클래스의 생성자를 호출할 수 있습니다. 이 SQL은 <code>PreparedStatement</code>를 생성하는 데 사용되므로 실행 중에 전달될 매개변수에 대한 자리 표시자가 포함될 수 있습니다. <code>SqlParameter</code>를 전달하는 <code>declarParameter</code> 메서드를 사용하여 각 매개 변수를 선언해야 합니다. <code>SqlParameter</code>는 이름과 <code>java.sql.Types</code>에 정의된 JDBC 타입을 사용합니다. 모든 매개변수를 정의한 후 명령문을 준비하고 나중에 실행할 수 있도록 <code>compile()</code> 메서드를 호출할 수 있습니다. 이 클래스는 컴파일된 후 스레드로부터 안전하므로 DAO가 초기화될 때 이러한 인스턴스가 생성되는 한, 인스턴스 변수로 유지되고 재사용될 수 있습니다. 다음 예제에서는 이러한 클래스를 정의하는 방법을 보여줍니다.</p>
<pre><code class="language-java"><span class="token keyword">private</span> <span class="token class-name">ActorMappingQuery</span> actorMappingQuery<span class="token punctuation">;</span>

<span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDataSource</span><span class="token punctuation">(</span><span class="token class-name">DataSource</span> dataSource<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>actorMappingQuery <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ActorMappingQuery</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token class-name">Customer</span> <span class="token function">getCustomer</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> actorMappingQuery<span class="token punctuation">.</span><span class="token function">findObject</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>이전 예제의 메소드는 유일한 매개변수로 전달된 <code>id</code>를 사용하여 고객을 검색합니다. 하나의 객체만 반환되기를 원하므로 <code>id</code>를 매개변수로 사용하여 <code>findObject</code> 편의 메서드를 호출합니다. 대신 개체 목록을 반환하고 추가 매개변수를 가져오는 쿼리가 있는 경우 가변 인수(varargs)로 전달된 매개변수 값의 배열을 가져오는 <code>execute</code> 메서드 중 하나를 사용합니다. 다음 예에서는 이러한 방법을 보여줍니다.</p>
<pre><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Actor</span><span class="token punctuation">&gt;</span></span> <span class="token function">searchForActors</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">,</span> <span class="token class-name">String</span> namePattern<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> actorSearchMappingQuery<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>age<span class="token punctuation">,</span> namePattern<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<h1 id="using-sqlupdate">Using <code>SqlUpdate</code></h1>
<p><code>SqlUpdate</code> 클래스는 SQL 업데이트를 캡슐화합니다. 쿼리와 마찬가지로 업데이트 개체는 재사용이 가능하며 모든 <code>RdbmsOperation</code> 클래스와 마찬가지로 업데이트에는 매개 변수가 있을 수 있으며 SQL로 정의됩니다. 이 클래스는 쿼리 객체의 <code>execute(..)</code> 메소드와 유사한 여러 <code>update(..)</code> 메소드를 제공합니다. <code>SqlUpdate</code> 클래스는 구체(concrete)입니다. 예를 들어 사용자 정의 업데이트 방법을 추가하기 위해 하위 클래스로 분류할 수 있습니다. 그러나 <code>SqlUpdate</code> 클래스는 SQL을 설정하고 매개 변수를 선언하여 쉽게 매개 변수화할 수 있으므로 하위 클래스로 분류할 필요가 없습니다. 다음 예에서는 <code>execute</code>이라는 사용자 지정 업데이트 메서드를 만듭니다.</p>
<pre><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql</span><span class="token punctuation">.</span><span class="token class-name">Types</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>sql</span><span class="token punctuation">.</span><span class="token class-name">DataSource</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>core</span><span class="token punctuation">.</span><span class="token class-name">SqlParameter</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>object</span><span class="token punctuation">.</span><span class="token class-name">SqlUpdate</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UpdateCreditRating</span> <span class="token keyword">extends</span> <span class="token class-name">SqlUpdate</span> <span class="token punctuation">{</span>

	<span class="token keyword">public</span> <span class="token class-name">UpdateCreditRating</span><span class="token punctuation">(</span><span class="token class-name">DataSource</span> ds<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">setDataSource</span><span class="token punctuation">(</span>ds<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">setSql</span><span class="token punctuation">(</span><span class="token string">"update customer set credit_rating = ? where id = ?"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">declareParameter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SqlParameter</span><span class="token punctuation">(</span><span class="token string">"creditRating"</span><span class="token punctuation">,</span> <span class="token class-name">Types</span><span class="token punctuation">.</span>NUMERIC<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">declareParameter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SqlParameter</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span> <span class="token class-name">Types</span><span class="token punctuation">.</span>NUMERIC<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">compile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">/**
	 * @param id for the Customer to be updated
	 * @param rating the new value for credit rating
	 * @return number of rows updated
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">,</span> <span class="token keyword">int</span> rating<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">update</span><span class="token punctuation">(</span>rating<span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h1 id="using-storedprocedure">Using <code>StoredProcedure</code></h1>
<p><code>StoredProcedure</code> 클래스는 RDBMS 저장된 프로시저의 객체 추상화를 위한 <code>abstract</code> 슈퍼클래스입니다.</p>
<p>상속된 <code>sql</code> 속성(property)은 RDBMS에 있는 저장된 프로시저의 이름입니다.</p>
<p><code>StoredProcedure</code> 클래스에 대한 매개 변수를 정의하려면 <code>SqlParameter</code> 또는 해당 하위 클래스 중 하나를 사용할 수 있습니다. 다음 코드 조각에 표시된 대로 생성자에서 매개변수 이름과 SQL 타입을 지정해야 합니다.</p>
<pre><code class="language-java"><span class="token keyword">new</span> <span class="token class-name">SqlParameter</span><span class="token punctuation">(</span><span class="token string">"in_id"</span><span class="token punctuation">,</span> <span class="token class-name">Types</span><span class="token punctuation">.</span>NUMERIC<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">new</span> <span class="token class-name">SqlOutParameter</span><span class="token punctuation">(</span><span class="token string">"out_first_name"</span><span class="token punctuation">,</span> <span class="token class-name">Types</span><span class="token punctuation">.</span>VARCHAR<span class="token punctuation">)</span><span class="token punctuation">,</span></code></pre>
<p>SQL 타입은 <code>java.sql.Types</code> 상수를 사용하여 지정됩니다.</p>
<p>첫 번째 줄(<code>SqlParameter</code> 포함)에서는 IN 매개 변수를 선언합니다. 저장된 프로시저 호출과 <code>SqlQuery</code> 및 해당 하위 클래스를 사용하는 쿼리 모두에 IN 매개 변수를 사용할 수 있습니다(<a href="https://docs.spring.io/spring-framework/reference/data-access/jdbc/object.html#jdbc-SqlQuery">SqlQuery 이해</a>에서 다룹니다).</p>
<p>두 번째 줄(<code>SqlOutParameter</code> 포함)은 저장 프로시저 호출에 사용할 <code>out</code> 매개 변수를 선언합니다. <code>InOut</code> 매개변수(프로시저에 <code>in</code> 값을 제공하고 값도 반환하는 매개변수)에 대한 <code>SqlInOutParameter</code>도 있습니다.</p>
<p><code>in</code> 매개변수의 경우 이름 및 SQL 타입 외에도 숫자 데이터의 소수점 이하 자릿수 또는 사용자 정의 데이터베이스 타입의 타입 이름을 지정할 수 있습니다. <code>out</code> 매개변수의 경우 <code>REF</code> 커서에서 반환된 행 매핑을 처리하기 위해 <code>RowMapper</code>를 제공할 수 있습니다. 또 다른 옵션은 반환 값의 사용자 정의 처리를 정의할 수 있는 <code>SqlReturnType</code>을 지정하는 것입니다.</p>
<p>간단한 DAO의 다음 예는 Oracle 데이터베이스와 함께 제공되는 함수(<code>sysdate()</code>)를 호출하기 위해 <code>StoredProcedure</code>를 사용합니다. 저장된 프로시저 기능을 사용하려면 <code>StoredProcedure</code>를 확장하는 클래스를 만들어야 합니다. 이 예에서 <code>StoredProcedure</code> 클래스는 내부 클래스입니다. 그러나 <code>StoredProcedure</code>를 재사용해야 하는 경우 이를 최상위 클래스로 선언할 수 있습니다. 이 예제에는 입력 매개 변수가 없지만 출력 매개 변수는 <code>SqlOutParameter</code> 클래스를 사용하여 날짜 형식으로 선언됩니다. <code>execute()</code> 메소드는 프로시저를 실행하고 결과 <code>Map</code>에서 반환된 날짜를 추출합니다. 결과 <code>Map</code>에는 매개변수 이름을 키로 사용하여 선언된 각 출력 매개변수(이 경우 하나만)에 대한 항목이 있습니다. 다음 목록은 사용자 정의 StoredProcedure 클래스를 보여줍니다.</p>
<pre><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql</span><span class="token punctuation">.</span><span class="token class-name">Types</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span><span class="token class-name">Date</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span><span class="token class-name">HashMap</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span><span class="token class-name">Map</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>sql</span><span class="token punctuation">.</span><span class="token class-name">DataSource</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation</span><span class="token punctuation">.</span><span class="token class-name">Autowired</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>core</span><span class="token punctuation">.</span><span class="token class-name">SqlOutParameter</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>object</span><span class="token punctuation">.</span><span class="token class-name">StoredProcedure</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StoredProcedureDao</span> <span class="token punctuation">{</span>

	<span class="token keyword">private</span> <span class="token class-name">GetSysdateProcedure</span> getSysdate<span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Autowired</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">DataSource</span> dataSource<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>getSysdate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GetSysdateProcedure</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">Date</span> <span class="token function">getSysdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> getSysdate<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">GetSysdateProcedure</span> <span class="token keyword">extends</span> <span class="token class-name">StoredProcedure</span> <span class="token punctuation">{</span>

		<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> SQL <span class="token operator">=</span> <span class="token string">"sysdate"</span><span class="token punctuation">;</span>

		<span class="token keyword">public</span> <span class="token class-name">GetSysdateProcedure</span><span class="token punctuation">(</span><span class="token class-name">DataSource</span> dataSource<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">setDataSource</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">setFunction</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">setSql</span><span class="token punctuation">(</span>SQL<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">declareParameter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SqlOutParameter</span><span class="token punctuation">(</span><span class="token string">"date"</span><span class="token punctuation">,</span> <span class="token class-name">Types</span><span class="token punctuation">.</span>DATE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">compile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">public</span> <span class="token class-name">Date</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// the 'sysdate' sproc has no input parameters, so an empty Map is supplied...</span>
			<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> results <span class="token operator">=</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">Date</span> sysdate <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Date</span><span class="token punctuation">)</span> results<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"date"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> sysdate<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre>
<p><code>StoredProcedure</code>의 다음 예에는 두 개의 출력 매개변수(이 경우 Oracle REF 커서)가 있습니다.</p>
<pre><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span><span class="token class-name">HashMap</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span><span class="token class-name">Map</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>sql</span><span class="token punctuation">.</span><span class="token class-name">DataSource</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">oracle<span class="token punctuation">.</span>jdbc</span><span class="token punctuation">.</span><span class="token class-name">OracleTypes</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>core</span><span class="token punctuation">.</span><span class="token class-name">SqlOutParameter</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>object</span><span class="token punctuation">.</span><span class="token class-name">StoredProcedure</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TitlesAndGenresStoredProcedure</span> <span class="token keyword">extends</span> <span class="token class-name">StoredProcedure</span> <span class="token punctuation">{</span>

	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> SPROC_NAME <span class="token operator">=</span> <span class="token string">"AllTitlesAndGenres"</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token class-name">TitlesAndGenresStoredProcedure</span><span class="token punctuation">(</span><span class="token class-name">DataSource</span> dataSource<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">super</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">,</span> SPROC_NAME<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">declareParameter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SqlOutParameter</span><span class="token punctuation">(</span><span class="token string">"titles"</span><span class="token punctuation">,</span> <span class="token class-name">OracleTypes</span><span class="token punctuation">.</span>CURSOR<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">TitleMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">declareParameter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SqlOutParameter</span><span class="token punctuation">(</span><span class="token string">"genres"</span><span class="token punctuation">,</span> <span class="token class-name">OracleTypes</span><span class="token punctuation">.</span>CURSOR<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">GenreMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">compile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// again, this sproc has no input parameters, so an empty Map is supplied</span>
		<span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p><code>TitlesAndGenresStoredProcedure</code> 생성자에서 사용된 <code>declareParameter(..)</code> 메소드의 오버로드된 변형이 어떻게 <code>RowMapper</code> 구현 인스턴스에 전달되는지 확인하세요. 이는 기존 기능을 재사용하는 매우 편리하고 강력한 방법입니다. 다음 두 예제는 두 개의 <code>RowMapper</code> 구현에 대한 코드를 제공합니다.</p>
<p><code>TitleMapper</code> 클래스는 다음과 같이 제공된 <code>ResultSet</code>의 각 행에 대해 <code>ResultSet</code>를 <code>Title</code> 도메인 객체에 매핑합니다.</p>
<pre><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql</span><span class="token punctuation">.</span><span class="token class-name">ResultSet</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql</span><span class="token punctuation">.</span><span class="token class-name">SQLException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>foo<span class="token punctuation">.</span>domain</span><span class="token punctuation">.</span><span class="token class-name">Title</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>core</span><span class="token punctuation">.</span><span class="token class-name">RowMapper</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">TitleMapper</span> <span class="token keyword">implements</span> <span class="token class-name">RowMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Title</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

	<span class="token keyword">public</span> <span class="token class-name">Title</span> <span class="token function">mapRow</span><span class="token punctuation">(</span><span class="token class-name">ResultSet</span> rs<span class="token punctuation">,</span> <span class="token keyword">int</span> rowNum<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
		<span class="token class-name">Title</span> title <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Title</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		title<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getLong</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		title<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> title<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p><code>GenreMapper</code> 클래스는 다음과 같이 제공된 <code>ResultSet</code>의 각 행에 대해 <code>ResultSet</code>를 <code>Genre</code> 도메인 객체에 매핑합니다.</p>
<pre><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql</span><span class="token punctuation">.</span><span class="token class-name">ResultSet</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql</span><span class="token punctuation">.</span><span class="token class-name">SQLException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>foo<span class="token punctuation">.</span>domain</span><span class="token punctuation">.</span><span class="token class-name">Genre</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>core</span><span class="token punctuation">.</span><span class="token class-name">RowMapper</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">GenreMapper</span> <span class="token keyword">implements</span> <span class="token class-name">RowMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Genre</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

	<span class="token keyword">public</span> <span class="token class-name">Genre</span> <span class="token function">mapRow</span><span class="token punctuation">(</span><span class="token class-name">ResultSet</span> rs<span class="token punctuation">,</span> <span class="token keyword">int</span> rowNum<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Genre</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>RDBMS의 정의에 하나 이상의 입력 매개변수가 있는 저장된 프로시저에 매개변수를 전달하려면 슈퍼클래스의 타입이 없는 <code>execution(Map)</code> 메소드에 위임하는 강력한 유형의 <code>execute(..)</code> 메소드를 코딩하면 됩니다. 다음 예는 다음을 보여줍니다.</p>
<pre><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql</span><span class="token punctuation">.</span><span class="token class-name">Types</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span><span class="token class-name">Date</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span><span class="token class-name">HashMap</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span><span class="token class-name">Map</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>sql</span><span class="token punctuation">.</span><span class="token class-name">DataSource</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">oracle<span class="token punctuation">.</span>jdbc</span><span class="token punctuation">.</span><span class="token class-name">OracleTypes</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>core</span><span class="token punctuation">.</span><span class="token class-name">SqlOutParameter</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>core</span><span class="token punctuation">.</span><span class="token class-name">SqlParameter</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>object</span><span class="token punctuation">.</span><span class="token class-name">StoredProcedure</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TitlesAfterDateStoredProcedure</span> <span class="token keyword">extends</span> <span class="token class-name">StoredProcedure</span> <span class="token punctuation">{</span>

	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> SPROC_NAME <span class="token operator">=</span> <span class="token string">"TitlesAfterDate"</span><span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> CUTOFF_DATE_PARAM <span class="token operator">=</span> <span class="token string">"cutoffDate"</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token class-name">TitlesAfterDateStoredProcedure</span><span class="token punctuation">(</span><span class="token class-name">DataSource</span> dataSource<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">super</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">,</span> SPROC_NAME<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">declareParameter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SqlParameter</span><span class="token punctuation">(</span>CUTOFF_DATE_PARAM<span class="token punctuation">,</span> <span class="token class-name">Types</span><span class="token punctuation">.</span>DATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">declareParameter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SqlOutParameter</span><span class="token punctuation">(</span><span class="token string">"titles"</span><span class="token punctuation">,</span> <span class="token class-name">OracleTypes</span><span class="token punctuation">.</span>CURSOR<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">TitleMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">compile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Date</span> cutoffDate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> inputs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		inputs<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>CUTOFF_DATE_PARAM<span class="token punctuation">,</span> cutoffDate<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>inputs<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>